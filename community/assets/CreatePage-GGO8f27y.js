import{_ as S,an as k,r as d,X as V,a0 as p,a1 as U,a2 as g,a3 as y,ad as n,a4 as l,a6 as Q,a9 as _,ah as u,a7 as D,ai as w,aj as I,ak as N}from"./index-igPNiqby.js";import{i as C,u as P,Q as R,a as j}from"./base-CiEjcQEA.js";import{Q as F,p as q,a as $}from"./ticket-DjK9-lQ_.js";import"./format-nZn2EDmM.js";import"./user-CsLZHPLc.js";const z={__name:"CreatePage",setup(o,{expose:a}){a();const c=k(),t=d(!1),f=d(),r=V({title:"",telegram:"",email:"",content:"",attachment:[]}),e=d({});function m(){C().then(i=>{e.value=i})}function B(){f.value.validate().then(i=>{i&&h()})}async function h(){t.value=!0;const i=[];for(let s=0;s<r.attachment.length;s++){const v=await P(r.attachment[s]);v.path&&i.push(v.path)}r.attachment=i,q(r).then(s=>{c.push("/info/"+s.data.id)}).catch(s=>{y.create({position:"top",message:s.message,timeout:3e3})}).finally(()=>{t.value=!1})}m();const b={router:c,loading:t,formRef:f,form:r,initData:e,getData:m,onSubmit:B,onPost:h,ref:d,reactive:V,get useRouter(){return k},get Notify(){return y},get post(){return q},get init(){return C},get upload(){return P}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},L={class:"box"},x={class:"title"},E={class:"message"},O={class:"row q-col-gutter-lg"},X={class:"col-sm-6 col-xs-12"},A={class:"q-pt-lg"},G={class:"col-sm-6 col-xs-12"},H={class:"content"};function J(o,a,c,t,f,r){return p(),U(F,{class:"q-pa-md"},{default:g(()=>[n("div",L,[l(Q,{flat:"",dense:"",class:"q-mb-sm text-blue-grey-3",icon:"eva-arrow-back-outline",onClick:a[0]||(a[0]=e=>o.$router.push("/"))}),n("div",x,_(o.$t("ticket_create")),1),n("div",E,_(o.$t("ticket_create_message")),1),n("div",O,[n("div",X,[n("div",A,[l(j,{ref:"formRef",class:"q-gutter-md"},{default:g(()=>[l(u,{outlined:"",dense:"",modelValue:t.form.title,"onUpdate:modelValue":a[1]||(a[1]=e=>t.form.title=e),label:o.$t("ticket_form.title")},null,8,["modelValue","label"]),l(u,{outlined:"",dense:"",modelValue:t.form.email,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.email=e),label:o.$t("ticket_form.email")},null,8,["modelValue","label"]),l(u,{outlined:"",dense:"",modelValue:t.form.telegram,"onUpdate:modelValue":a[3]||(a[3]=e=>t.form.telegram=e),label:o.$t("ticket_form.telegram")},null,8,["modelValue","label"]),l(u,{outlined:"",dense:"",type:"textarea",modelValue:t.form.content,"onUpdate:modelValue":a[4]||(a[4]=e=>t.form.content=e),label:o.$t("ticket_form.content"),hint:o.$t("ticket_form.content_message"),"lazy-rules":"",rules:[e=>e&&e.length>0||o.$t("ticket_form.content_message")]},null,8,["modelValue","label","hint","rules"]),l(R,{outlined:"",dense:"",multiple:"",modelValue:t.form.attachment,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.attachment=e),label:o.$t("ticket_form.attachment"),accept:".jpg,.pdf,.png,.gif"},{append:g(()=>[l(D,{name:"eva-attach-outline",size:"16px"})]),_:1},8,["modelValue","label"]),l(Q,{unelevated:"",label:o.$t("submit"),color:"primary",onClick:t.onSubmit},null,8,["label"])]),_:1},512)])]),n("div",G,[n("div",H,[(p(!0),w(N,null,I(t.initData.ticket_tip??[],(e,m)=>(p(),w("div",{key:m},_(e),1))),128))])])]),l($,{showing:t.loading},null,8,["showing"])])]),_:1})}const Z=S(z,[["render",J],["__scopeId","data-v-659275bf"],["__file","CreatePage.vue"]]);export{Z as default};
