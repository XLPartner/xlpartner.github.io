import{c as A,a as n,h as _,W as ae,ai as le,r as $,w as F,g as ne,a3 as U,aj as Q,ak as ie,s as oe,_ as se,U as j,Y as k,Z as E,$ as O,aa as i,a6 as r,a1 as C,al as p,am as ue,ad as re,an as T,a4 as de,ao as ce,a5 as D}from"./index-BVudpYoi.js";import{Q as ve,a as ge,t as z,b as me}from"./ticket-rFse8_Jv.js";import{u as be,a as fe,b as _e}from"./format-bPrsU9Pb.js";import{d as ye}from"./date-D9ybJlsp.js";import{u as Y}from"./user-C6lVHT2W.js";const he=["top","middle","bottom"],xe=A({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>he.includes(e)}},setup(e,{slots:u}){const g=n(()=>e.align!==void 0?{verticalAlign:e.align}:null),o=n(()=>{const d=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(d!==void 0?` text-${d}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:o.value,style:g.value,role:"status","aria-label":e.label},ae(u.default,e.label!==void 0?[e.label]:[]))}});function V(e,u){return[!0,!1].includes(e)?e:u}const Se=A({name:"QPagination",props:{...be,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||le.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:u}){const{proxy:g}=ne(),{$q:o}=g,d=fe(e,o),s=n(()=>parseInt(e.min,10)),t=n(()=>parseInt(e.max,10)),m=n(()=>parseInt(e.maxPages,10)),w=n(()=>f.value+" / "+t.value),H=n(()=>V(e.boundaryLinks,e.input)),y=n(()=>V(e.boundaryNumbers,!e.input)),K=n(()=>V(e.directionLinks,e.input)),q=n(()=>V(e.ellipses,!e.input)),B=$(null),f=n({get:()=>e.modelValue,set:a=>{if(a=parseInt(a,10),e.disable||isNaN(a))return;const l=_e(a,s.value,t.value);e.modelValue!==l&&u("update:modelValue",l)}});F(()=>`${s.value}|${t.value}`,()=>{f.value=e.modelValue});const W=n(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),N=n(()=>e.gutter in Q?`${Q[e.gutter]}px`:e.gutter||null),Z=n(()=>N.value!==null?`--q-pagination-gutter-parent:-${N.value};--q-pagination-gutter-child:${N.value}`:null),P=n(()=>{const a=[e.iconFirst||o.iconSet.pagination.first,e.iconPrev||o.iconSet.pagination.prev,e.iconNext||o.iconSet.pagination.next,e.iconLast||o.iconSet.pagination.last];return o.lang.rtl===!0?a.reverse():a}),G=n(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),I=n(()=>ie(e,"flat")),J=n(()=>({[I.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),R=n(()=>{const a={[I.value]:!1};return e.activeDesign!==""&&(a[e.activeDesign]=!0),a}),X=n(()=>({...R.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),h=n(()=>{let a=Math.max(m.value,1+(q.value?2:0)+(y.value?2:0));const l={pgFrom:s.value,pgTo:t.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(t.value).length)}em`}};return m.value&&a<t.value-s.value+1&&(a=1+Math.floor(a/2)*2,l.pgFrom=Math.max(s.value,Math.min(t.value-a+1,e.modelValue-Math.floor(a/2))),l.pgTo=Math.min(t.value,l.pgFrom+a-1),y.value&&(l.boundaryStart=!0,l.pgFrom++),q.value&&l.pgFrom>s.value+(y.value?1:0)&&(l.ellipsesStart=!0,l.pgFrom++),y.value&&(l.boundaryEnd=!0,l.pgTo--),q.value&&l.pgTo<t.value-(y.value?1:0)&&(l.ellipsesEnd=!0,l.pgTo--)),l});function M(a){f.value=a}function ee(a){f.value=f.value+a}const te=n(()=>{function a(){f.value=B.value,B.value=null}return{"onUpdate:modelValue":l=>{B.value=l},onKeyup:l=>{oe(l,13)===!0&&a()},onBlur:a}});function v(a,l,x){const b={"aria-label":l,"aria-current":"false",...J.value,...a};return x===!0&&Object.assign(b,{"aria-current":"true",...X.value}),l!==void 0&&(e.toFn!==void 0?b.to=e.toFn(l):b.onClick=()=>{M(l)}),_(U,b)}return Object.assign(g,{set:M,setByOffset:ee}),()=>{const a=[],l=[];let x;if(H.value===!0&&(a.push(v({key:"bls",disable:e.disable||e.modelValue<=s.value,icon:P.value[0]},s.value)),l.unshift(v({key:"ble",disable:e.disable||e.modelValue>=t.value,icon:P.value[3]},t.value))),K.value===!0&&(a.push(v({key:"bdp",disable:e.disable||e.modelValue<=s.value,icon:P.value[1]},e.modelValue-1)),l.unshift(v({key:"bdn",disable:e.disable||e.modelValue>=t.value,icon:P.value[2]},e.modelValue+1))),e.input!==!0){x=[];const{pgFrom:b,pgTo:L,marginalStyle:S}=h.value;if(h.value.boundaryStart===!0){const c=s.value===e.modelValue;a.push(v({key:"bns",style:S,disable:e.disable,label:s.value},s.value,c))}if(h.value.boundaryEnd===!0){const c=t.value===e.modelValue;l.unshift(v({key:"bne",style:S,disable:e.disable,label:t.value},t.value,c))}h.value.ellipsesStart===!0&&a.push(v({key:"bes",style:S,disable:e.disable,label:"…",ripple:!1},b-1)),h.value.ellipsesEnd===!0&&l.unshift(v({key:"bee",style:S,disable:e.disable,label:"…",ripple:!1},L+1));for(let c=b;c<=L;c++)x.push(v({key:`bpg${c}`,style:S,disable:e.disable,label:c},c,c===e.modelValue))}return _("div",{class:W.value,...G.value},[_("div",{class:"q-pagination__content row no-wrap items-center",style:Z.value},[...a,e.input===!0?_(ve,{class:"inline",style:{width:`${w.value.length/1.5}em`},type:"number",dense:!0,value:B.value,disable:e.disable,dark:d.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:w.value,min:s.value,max:t.value,...te.value}):_("div",{class:"q-pagination__middle row justify-center"},x),...l])])}}}),ke=Object.assign({name:"IndexPage"},{__name:"IndexPage",setup(e,{expose:u}){u();const g=$([]),o=$(!1),d=j({page:1,max:1,limit:10});function s(){o.value=!0,z(d).then(m=>{o.value=!1,g.value=m.data,d.max=m.meta.pagination.total_pages})}Y.on(()=>{s()}),F(()=>d.page,()=>{s()});const t={list:g,loading:o,data:d,getData:s,get date(){return ye},ref:$,reactive:j,watch:F,get topic(){return z},get userModel(){return Y}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),Be={class:"box"},Pe={class:"row"},Ce={class:"col-sm-8 col-xs-12"},Ve={class:"title"},$e={class:"message"},we={class:"col-sm-4 col-xs-12"},qe={class:"create"},Ne=["onClick"],pe={class:"col-sm-4 col-xs-12"},De={class:"row items-center"},Fe={class:"col"},Ie={class:"name ellipsis"},Me={class:"col-sm-4 col-xs-12"},Le={class:"msg ellipsis-2-lines"},Qe={class:"col-sm-3 col-xs-12 offset-sm-1"},je={class:"item ellipsis text-primary"},Ee={class:"item-name"},Oe={class:"item ellipsis"},Te={class:"item-name"},ze={key:0,class:"empty"},Ye={class:"page"};function Ae(e,u,g,o,d,s){return k(),E(ge,{class:"q-pa-md"},{default:O(()=>[i("div",Be,[i("div",Pe,[i("div",Ce,[i("div",Ve,r(e.$t("ticket")),1),i("div",$e,r(e.$t("ticket_message")),1)]),i("div",we,[i("div",qe,[C(U,{unelevated:"",color:"primary",size:"14px",label:e.$t("create"),onClick:u[0]||(u[0]=t=>e.$router.push("/create"))},null,8,["label"])])])])]),(k(!0),p(re,null,ue(o.list,(t,m)=>(k(),p("div",{class:"ticket box",key:m},[i("div",{class:"row items-center q-col-gutter-md",onClick:w=>e.$router.push("/info/"+t.id)},[i("div",pe,[i("div",De,[C(de,{class:"q-pr-md col-auto",size:"30px",name:{"-1":"eva-close-circle-outline",0:"eva-clock-outline",1:"eva-checkmark-circle-2-outline"}[t.status],color:{"-1":"grey-5",0:"primary",1:"positive"}[t.status]},null,8,["name","color"]),i("div",Fe,[i("div",Ie,r(t.title),1),i("div",{class:ce(["status",{"text-grey-5":t.status==-1,"text-primary":t.status==0,"text-positive":t.status==1}])},r(e.$t("ticket_form.status_text."+t.status)),3)])])]),i("div",Me,[i("div",Le,"“"+r(t.last_message)+"”",1),t.message_count-t.user_read>0?(k(),E(xe,{key:0,color:"red",floating:""},{default:O(()=>[D(r(t.message_count-t.user_read),1)]),_:2},1024)):T("",!0)]),i("div",Qe,[i("div",je,[i("div",Ee,r(e.$t("ticket_form.order_number")),1),D(" "+r(t.order_number_show)+" BNB ",1)]),i("div",Oe,[i("div",Te,r(e.$t("ticket_form.updated_at")),1),D(" "+r(o.date.formatDate(t.updated_at*1e3,"YYYY/MM/DD HH:mm")),1)])])],8,Ne)]))),128)),o.list.length?T("",!0):(k(),p("div",ze,r(e.$t("empty")),1)),i("div",Ye,[C(Se,{modelValue:o.data.page,"onUpdate:modelValue":u[1]||(u[1]=t=>o.data.page=t),max:o.data.max,input:"",color:"grey","active-color":"primary","max-pages":5},null,8,["modelValue","max"])]),C(me,{showing:o.loading},null,8,["showing"])]),_:1})}const Ge=se(ke,[["render",Ae],["__scopeId","data-v-a639e39e"],["__file","IndexPage.vue"]]);export{Ge as default};
